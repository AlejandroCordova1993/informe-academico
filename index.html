<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Informe Acad√©mico - Clase Interactiva</title>
    <style>
        /* Login Screen */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(20, 184, 166, 0.95));
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 48px;
            border-radius: 24px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            max-width: 450px;
            width: 100%;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-emoji {
            font-size: 64px;
            text-align: center;
            margin-bottom: 24px;
        }

        .login-title {
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 12px;
            color: #1f2937;
        }

        .login-subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 32px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.2s;
            font-family: inherit;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-input::placeholder {
            color: #9ca3af;
        }

        .btn-login {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #2563eb, #14b8a6);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
        }

        .btn-login:active {
            transform: translateY(0);
        }

        .btn-login:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Score Display */
        .score-badge {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            padding: 16px 24px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 998;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-width: 150px;
        }

        .score-label {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .score-value {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #2563eb, #14b8a6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .student-name {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            text-align: center;
        }

        .student-course {
            font-size: 12px;
            color: #6b7280;
        }

        /* Results Panel */
        .results-panel {
            background: linear-gradient(135deg, #f0f9ff, #f0fdfa);
            border: 3px solid;
            border-radius: 20px;
            padding: 40px;
            margin: 48px 0;
            text-align: center;
        }

        .results-panel.excelente {
            border-color: #14b8a6;
        }

        .results-panel.bueno {
            border-color: #2563eb;
        }

        .results-panel.regular {
            border-color: #f59e0b;
        }

        .results-panel.insuficiente {
            border-color: #ef4444;
        }

        .results-emoji {
            font-size: 80px;
            margin-bottom: 16px;
        }

        .results-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .results-score {
            font-size: 64px;
            font-weight: 700;
            margin: 24px 0;
            background: linear-gradient(135deg, #2563eb, #14b8a6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .results-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 32px;
        }

        .breakdown-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .breakdown-label {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .breakdown-value {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
        }

        /* Design System - Paleta Moderna */
        :root {
            --color-white: #ffffff;
            --color-black: #000000;
            
            /* Azul profundo sofisticado */
            --color-primary-400: #60a5fa;
            --color-primary-600: #2563eb;
            --color-primary-700: #1d4ed8;
            
            /* Verde azulado elegante */
            --color-success-400: #2dd4bf;
            --color-success-500: #14b8a6;
            
            /* √Åmbar c√°lido */
            --color-accent-400: #fbbf24;
            --color-accent-500: #f59e0b;
            
            /* Rojo elegante */
            --color-error-400: #f87171;
            --color-error-500: #ef4444;
            
            /* √çndigo sofisticado */
            --color-indigo-500: #6366f1;
            
            /* Grises */
            --color-gray-50: #f9fafb;
            --color-gray-100: #f3f4f6;
            --color-gray-200: #e5e7eb;
            --color-gray-500: #6b7280;
            --color-gray-700: #374151;
            --color-gray-900: #111827;
            
            /* Colores de fondo transparentes */
            --color-bg-blue: rgba(59, 130, 246, 0.06);
            --color-bg-green: rgba(20, 184, 166, 0.06);
            --color-bg-amber: rgba(245, 158, 11, 0.06);
            --color-bg-red: rgba(239, 68, 68, 0.06);
            --color-bg-indigo: rgba(99, 102, 241, 0.06);
            
            /* Sistema de colores */
            --color-background: var(--color-gray-50);
            --color-surface: var(--color-white);
            --color-text: var(--color-gray-900);
            --color-text-secondary: var(--color-gray-500);
            --color-primary: var(--color-primary-600);
            --color-success: var(--color-success-500);
            --color-error: var(--color-error-500);
            --color-warning: var(--color-accent-500);
            
            /* Tipograf√≠a */
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-size-sm: 14px;
            --font-size-base: 16px;
            --font-size-lg: 18px;
            --font-size-xl: 20px;
            --font-size-2xl: 24px;
            --font-size-3xl: 30px;
            --font-size-4xl: 40px;
            
            /* Espaciado */
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-8: 32px;
            --space-12: 48px;
            --space-16: 64px;
            
            /* Bordes */
            --radius-md: 10px;
            --radius-lg: 14px;
            --radius-xl: 20px;
            
            /* Sombras */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--color-text);
            background: linear-gradient(135deg, var(--color-bg-blue) 0%, var(--color-bg-green) 100%);
            background-attachment: fixed;
        }

        /* Progress Bar */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-success));
            width: 0%;
            transition: width 0.2s;
        }

        /* Navigation */
        .nav {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: var(--space-4);
            box-shadow: var(--shadow-md);
            z-index: 999;
            display: flex;
            justify-content: center;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: var(--space-2) var(--space-4);
            background: var(--color-bg-blue);
            border: none;
            border-radius: var(--radius-md);
            color: var(--color-text);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: var(--color-primary);
            color: white;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--color-primary);
            color: white;
        }

        /* Container */
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 100px var(--space-6) var(--space-16);
        }

        /* Hero */
        .hero {
            text-align: center;
            padding: var(--space-12) var(--space-6);
            margin-bottom: var(--space-12);
            background: var(--color-surface);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .hero-emoji {
            font-size: 60px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .hero h1 {
            font-size: var(--font-size-4xl);
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: var(--space-4) 0;
        }

        .hero-subtitle {
            font-size: var(--font-size-lg);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-6);
        }

        .hero-image {
            width: 100%;
            max-width: 700px;
            height: auto;
            border-radius: var(--radius-xl);
            margin-top: var(--space-6);
            box-shadow: var(--shadow-lg);
        }

        /* Section */
        .section {
            margin-bottom: var(--space-12);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s;
        }

        .section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .section-icon {
            font-size: 40px;
        }

        .section-title {
            font-size: var(--font-size-3xl);
            font-weight: 700;
            color: var(--color-text);
            border-bottom: 4px solid var(--color-primary);
            padding-bottom: var(--space-2);
        }

        /* Card */
        .card {
            background: var(--color-surface);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .card p {
            margin-bottom: var(--space-4);
            line-height: 1.7;
        }

        .card p:last-child {
            margin-bottom: 0;
        }

        /* Key Concept */
        .key-concept {
            background: linear-gradient(135deg, var(--color-bg-blue), var(--color-bg-green));
            border-left: 5px solid var(--color-primary);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            margin: var(--space-6) 0;
        }

        .key-concept-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--space-3);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .key-concept-title::before {
            content: 'üí°';
            font-size: 24px;
        }

        /* Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-6);
            margin: var(--space-6) 0;
        }

        .grid-card {
            background: var(--color-surface);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            cursor: pointer;
        }

        .grid-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }

        .grid-card-emoji {
            font-size: 48px;
            margin-bottom: var(--space-4);
        }

        .grid-card-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            margin-bottom: var(--space-3);
        }

        .grid-card-description {
            color: var(--color-text-secondary);
            line-height: 1.6;
        }

        /* Section Image */
        .section-image {
            width: 100%;
            max-width: 600px;
            height: auto;
            border-radius: var(--radius-lg);
            margin: var(--space-6) auto;
            display: block;
            box-shadow: var(--shadow-lg);
        }

        /* Quiz Styles */
        .quiz-card {
            background: var(--color-surface);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .quiz-card.correct {
            border-color: var(--color-success);
            background: var(--color-bg-green);
        }

        .quiz-card.incorrect {
            border-color: var(--color-error);
            background: var(--color-bg-red);
        }

        .quiz-question {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--space-5);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .quiz-option {
            padding: var(--space-4);
            background: var(--color-bg-blue);
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background: var(--color-bg-green);
            border-color: var(--color-primary);
            transform: translateX(4px);
        }

        .quiz-option.correct {
            background: var(--color-success);
            color: white;
            border-color: var(--color-success);
        }

        .quiz-option.incorrect {
            background: var(--color-error);
            color: white;
            border-color: var(--color-error);
        }

        .quiz-option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .quiz-feedback {
            margin-top: var(--space-4);
            padding: var(--space-4);
            border-radius: var(--radius-md);
            font-weight: 500;
        }

        .quiz-feedback.correct {
            background: var(--color-bg-green);
            color: var(--color-success);
            border-left: 4px solid var(--color-success);
        }

        .quiz-feedback.incorrect {
            background: var(--color-bg-red);
            color: var(--color-error);
            border-left: 4px solid var(--color-error);
        }

        /* Drag and Drop */
        .concept-pool {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-3);
            padding: var(--space-5);
            background: var(--color-bg-amber);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
            min-height: 80px;
        }

        .draggable {
            padding: var(--space-3) var(--space-5);
            background: var(--color-primary);
            color: white;
            border-radius: var(--radius-md);
            cursor: move;
            user-select: none;
            font-weight: 500;
            box-shadow: var(--shadow-sm);
            transition: all 0.2s;
        }

        .draggable:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .draggable.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            min-height: 60px;
            padding: var(--space-4);
            background: var(--color-bg-blue);
            border: 2px dashed var(--color-gray-200);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            margin-bottom: var(--space-3);
        }

        .drop-zone.drag-over {
            background: var(--color-bg-green);
            border-color: var(--color-primary);
            transform: scale(1.02);
        }

        .drop-zone.filled {
            background: var(--color-surface);
            border-style: solid;
        }

        .drop-zone.correct {
            background: var(--color-bg-green);
            border-color: var(--color-success);
            border-width: 3px;
        }

        .drop-zone.incorrect {
            background: var(--color-bg-red);
            border-color: var(--color-error);
            border-width: 3px;
        }

        .drop-label {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--color-text-secondary);
            margin-bottom: var(--space-2);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: var(--space-6) 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 30px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--color-primary), var(--color-success));
        }

        .timeline-item {
            position: relative;
            padding-left: 80px;
            margin-bottom: var(--space-8);
        }

        .timeline-number {
            position: absolute;
            left: 0;
            top: 0;
            width: 60px;
            height: 60px;
            background: var(--color-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-2xl);
            font-weight: 700;
            box-shadow: var(--shadow-lg);
        }

        .timeline-content {
            background: var(--color-surface);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .timeline-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            margin-bottom: var(--space-3);
        }

        /* Comparison */
        .comparison-box {
            background: var(--color-surface);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
        }

        .comparison-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            margin-bottom: var(--space-6);
            flex-wrap: wrap;
        }

        .comparison-label {
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: var(--font-size-lg);
        }

        .comparison-label.informe {
            background: var(--color-primary);
            color: white;
        }

        .comparison-label.otro {
            background: var(--color-error);
            color: white;
        }

        .comparison-vs {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-text-secondary);
        }

        /* Checklist */
        .checklist-item {
            background: var(--color-surface);
            padding: var(--space-4);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-3);
            display: flex;
            align-items: center;
            gap: var(--space-4);
            cursor: pointer;
            transition: all 0.2s;
        }

        .checklist-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-md);
        }

        .checklist-item.checked {
            background: var(--color-bg-green);
        }

        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--color-gray-200);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .checklist-item.checked .checkbox {
            background: var(--color-success);
            border-color: var(--color-success);
        }

        .checklist-item.checked .checkbox::after {
            content: '‚úì';
            color: white;
            font-weight: 700;
        }

        /* Button */
        .btn {
            padding: var(--space-4) var(--space-6);
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: var(--font-size-base);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: var(--shadow-md);
        }

        .btn:hover {
            background: var(--color-primary-700);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--color-gray-200);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background: var(--color-gray-500);
            color: white;
        }

        /* Result Box */
        .result-box {
            text-align: center;
            padding: var(--space-8);
            background: linear-gradient(135deg, var(--color-bg-green), var(--color-bg-blue));
            border-radius: var(--radius-xl);
            margin-top: var(--space-6);
        }

        .result-emoji {
            font-size: 60px;
            margin-bottom: var(--space-4);
        }

        .result-title {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--space-3);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: var(--space-12);
            background: var(--color-surface);
            border-radius: var(--radius-xl);
            margin-top: var(--space-16);
        }

        .footer-emoji {
            font-size: 50px;
            margin-bottom: var(--space-4);
        }

        .footer-title {
            font-size: var(--font-size-3xl);
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--space-4);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: var(--font-size-3xl);
            }

            .section-title {
                font-size: var(--font-size-2xl);
            }

            .timeline-item {
                padding-left: 60px;
            }

            .timeline-number {
                width: 45px;
                height: 45px;
                font-size: var(--font-size-lg);
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .score-badge {
                top: 70px;
                right: 10px;
                padding: 12px 16px;
                min-width: 120px;
            }

            .score-value {
                font-size: 24px;
            }

            .login-box {
                padding: 32px 24px;
            }

            .results-score {
                font-size: 48px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <div class="login-emoji">üìö</div>
            <h1 class="login-title">Bienvenido/a</h1>
            <p class="login-subtitle">Ingresa tus datos para comenzar la clase sobre El Informe Acad√©mico</p>
            
            <form id="loginForm" onsubmit="return startClass(event)">
                <div class="form-group">
                    <label class="form-label" for="studentName">Tu nombre completo:</label>
                    <input 
                        type="text" 
                        id="studentName" 
                        class="form-input" 
                        placeholder="Ej: Juan P√©rez" 
                        required
                        minlength="3"
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="studentCourse">Selecciona tu curso:</label>
                    <select id="studentCourse" class="form-select" required>
                        <option value="">-- Elige tu curso --</option>
                        <option value="10mo G">10mo G</option>
                        <option value="10mo H">10mo H</option>
                        <option value="10mo I">10mo I</option>
                        <option value="10mo J">10mo J</option>
                    </select>
                </div>
                
                <button type="submit" class="btn-login">
                    Comenzar Clase üöÄ
                </button>
            </form>
        </div>
    </div>

    <!-- Score Badge -->
    <div class="score-badge" id="scoreBadge" style="display: none;">
        <div class="score-label">Tu Nota</div>
        <div class="score-value" id="scoreValue">0.0</div>
        <div class="student-name" id="displayName"></div>
        <div class="student-course" id="displayCourse"></div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <!-- Navigation -->
    <nav class="nav">
        <button class="nav-btn" onclick="scrollTo('section1')">¬øQu√© es?</button>
        <button class="nav-btn" onclick="scrollTo('section2')">Tipos</button>
        <button class="nav-btn" onclick="scrollTo('activityTipos')">Actividad</button>
        <button class="nav-btn" onclick="scrollTo('section3')">Objetividad</button>
        <button class="nav-btn" onclick="scrollTo('quiz1')">Quiz</button>
        <button class="nav-btn" onclick="scrollTo('section4')">Estructura</button>
        <button class="nav-btn" onclick="scrollTo('conceptMap')">Mapa</button>
        <button class="nav-btn" onclick="scrollTo('section5')">G√©neros</button>
        <button class="nav-btn" onclick="scrollTo('redaccionActivity')">Redacci√≥n</button>
        <button class="nav-btn" onclick="scrollTo('checklist')">Checklist</button>
    </nav>

    <div class="container">
        <!-- Hero -->
        <header class="hero">
            <div class="hero-emoji">üèõÔ∏è</div>
            <h1>El Informe Acad√©mico</h1>
            <p class="hero-subtitle">Gu√≠a esencial para estudiantes: aprende lo fundamental del informe acad√©mico</p>
            <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=800&h=400&fit=crop" alt="Estudiantes trabajando" class="hero-image">
        </header>

        <!-- Section 1: ¬øQu√© es? -->
        <section class="section" id="section1">
            <div class="section-header">
                <div class="section-icon">üìù</div>
                <h2 class="section-title">¬øQu√© es un Informe?</h2>
            </div>

            <div class="card">
                <p>Un informe es un <strong>documento escrito</strong> que presenta informaci√≥n <strong>clara, ordenada y objetiva</strong> sobre un tema o investigaci√≥n.</p>
                <p>Se utiliza en educaci√≥n, ciencia y trabajo para <strong>informar, analizar y recomendar</strong> bas√°ndose en hechos y datos verificables.</p>
                <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=600&h=400&fit=crop" alt="Documento" class="section-image">
            </div>

            <div class="key-concept">
                <div class="key-concept-title">La Regla de Oro</div>
                <p>Un informe NO es opini√≥n personal. Se basa en <strong>hechos observables</strong>, <strong>datos</strong> y <strong>fuentes verificables</strong>. No escribimos "me parece" o "creo que", sino "se observ√≥", "los datos muestran", "seg√∫n la investigaci√≥n".</p>
            </div>
        </section>

        <!-- Section 2: Tipos de Informes -->
        <section class="section" id="section2">
            <div class="section-header">
                <div class="section-icon">üìö</div>
                <h2 class="section-title">Tipos de Informes</h2>
            </div>

            <div class="grid">
                <div class="grid-card" style="border-top: 4px solid var(--color-primary);">
                    <div class="grid-card-emoji">üìä</div>
                    <h3 class="grid-card-title">Informe Expositivo</h3>
                    <p class="grid-card-description">Presenta informaci√≥n sobre un hecho o evento. Cuenta lo que sucedi√≥ de forma clara y ordenada.</p>
                    <p style="margin-top: 12px; padding: 12px; background: var(--color-bg-blue); border-radius: 8px; font-size: 14px;"><strong>Ejemplo:</strong> Informe sobre una visita al museo</p>
                </div>

                <div class="grid-card" style="border-top: 4px solid var(--color-success);">
                    <div class="grid-card-emoji">üî¨</div>
                    <h3 class="grid-card-title">Informe Descriptivo Anal√≠tico</h3>
                    <p class="grid-card-description">Describe y analiza un proceso o fen√≥meno. Explica c√≥mo funciona algo y por qu√©.</p>
                    <p style="margin-top: 12px; padding: 12px; background: var(--color-bg-green); border-radius: 8px; font-size: 14px;"><strong>Ejemplo:</strong> Informe de laboratorio sobre un experimento</p>
                </div>

                <div class="grid-card" style="border-top: 4px solid var(--color-warning);">
                    <div class="grid-card-emoji">üí°</div>
                    <h3 class="grid-card-title">Informe Persuasivo</h3>
                    <p class="grid-card-description">Analiza un problema y propone soluciones. Busca convencer para tomar decisiones.</p>
                    <p style="margin-top: 12px; padding: 12px; background: var(--color-bg-amber); border-radius: 8px; font-size: 14px;"><strong>Ejemplo:</strong> Propuesta para mejorar la biblioteca escolar</p>
                </div>
            </div>
        </section>

        <!-- Activity: Identifica el Tipo de Informe -->
        <section class="section" id="activityTipos">
            <div class="section-header">
                <div class="section-icon">üéÆ</div>
                <h2 class="section-title">Actividad Interactiva: ¬øQu√© Tipo de Informe?</h2>
            </div>

            <div class="card">
                <p style="font-size: 18px; margin-bottom: 24px;">Lee cada situaci√≥n y determina qu√© tipo de informe ser√≠a m√°s apropiado.</p>
            </div>

            <div id="tiposQuizContainer"></div>
            
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn" onclick="verifyTiposQuiz()" id="verifyTiposBtn">
                    üîç Verificar Respuestas del Quiz
                </button>
                <button class="btn btn-secondary" onclick="retryTiposQuiz()" id="retryTiposBtn" style="display: none; margin-left: 12px;">
                    üîÑ Reintentar Quiz
                </button>
            </div>

            <div id="tiposQuizResult" style="display: none; margin-top: 24px;"></div>
        </section>

        <!-- Section 3: Subjetividad vs. Objetividad -->
        <section class="section" id="section3">
            <div class="section-header">
                <div class="section-icon">‚öñÔ∏è</div>
                <h2 class="section-title">Subjetividad vs. Objetividad</h2>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #ffccd5, #ffe0e8); border-left: 5px solid #ef4444;">
                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 16px; color: #ef4444;">üí≠ SUBJETIVIDAD (EVITAR en informes)</h3>
                <p><strong>Basada en sentimientos y opiniones personales.</strong> Es lo que YO pienso o siento.</p>
                
                <div style="margin-top: 20px; padding: 16px; background: white; border-radius: 10px;">
                    <p style="font-weight: 600; margin-bottom: 12px;">Caracter√≠sticas:</p>
                    <ul style="padding-left: 24px; line-height: 1.8;">
                        <li>Var√≠a de persona a persona</li>
                        <li>No se puede verificar</li>
                        <li>Usa palabras como: "me parece", "creo", "pienso", "me gusta"</li>
                        <li>Incluye adjetivos de opini√≥n: "bonito", "feo", "aburrido"</li>
                    </ul>
                </div>

                <div style="margin-top: 16px; padding: 16px; background: #ffe0e8; border-radius: 10px;">
                    <p style="font-weight: 700; margin-bottom: 8px;">‚ùå Ejemplos SUBJETIVOS:</p>
                    <p>"La pel√≠cula fue aburrida y terrible"</p>
                    <p>"Creo que el cambio clim√°tico es malo"</p>
                    <p>"Mi profesor es muy buena gente"</p>
                </div>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #c5e8d5, #d5f3e3); border-left: 5px solid #14b8a6; margin-top: 24px;">
                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 16px; color: #14b8a6;">üìä OBJETIVIDAD (USAR en informes)</h3>
                <p><strong>Basada en hechos, datos observables e informaci√≥n verificable.</strong> Existe independientemente de lo que yo piense.</p>
                
                <div style="margin-top: 20px; padding: 16px; background: white; border-radius: 10px;">
                    <p style="font-weight: 600; margin-bottom: 12px;">Caracter√≠sticas:</p>
                    <ul style="padding-left: 24px; line-height: 1.8;">
                        <li>Es igual para todos</li>
                        <li>Se puede verificar y comprobar</li>
                        <li>Usa palabras como: "se observ√≥", "los datos indican", "seg√∫n"</li>
                        <li>Incluye n√∫meros, fechas, medidas exactas</li>
                    </ul>
                </div>

                <div style="margin-top: 16px; padding: 16px; background: #d5f3e3; border-radius: 10px;">
                    <p style="font-weight: 700; margin-bottom: 8px;">‚úÖ Ejemplos OBJETIVOS:</p>
                    <p>"La pel√≠cula tiene una duraci√≥n de 120 minutos y fue estrenada en 2024"</p>
                    <p>"La temperatura global ha aumentado 1.1¬∞C en los √∫ltimos 100 a√±os"</p>
                    <p>"El rendimiento estudiantil mejor√≥ en un 25% seg√∫n los datos"</p>
                </div>
            </div>

            <div class="key-concept" style="margin-top: 32px;">
                <div class="key-concept-title">Por qu√© es importante</div>
                <p>La objetividad permite que tu informe sea <strong>√∫til, cre√≠ble y respetado</strong>. Cuando presentas datos verificables en lugar de opiniones, otros pueden confiar en tu trabajo y usarlo para tomar decisiones informadas.</p>
            </div>
        </section>

        <!-- Quiz 1: Objetividad vs. Subjetividad -->
        <section class="section" id="quiz1">
            <div class="section-header">
                <div class="section-icon">üéØ</div>
                <h2 class="section-title">Actividad 1: Identifica la Objetividad</h2>
            </div>

            <div class="card">
                <p style="font-size: 18px; color: var(--color-text-secondary); margin-bottom: 24px;">¬øPuedes identificar cu√°l frase es OBJETIVA? Haz clic en tu respuesta.</p>
            </div>

            <div id="quiz1Container"></div>
            
            <div style="text-align: center; margin-top: 24px;">
                <button class="btn" onclick="verifyQuiz1()" id="verifyQuiz1Btn">
                    üîç Verificar Respuestas del Quiz
                </button>
                <button class="btn btn-secondary" onclick="retryQuiz1()" id="retryQuiz1Btn" style="display: none; margin-left: 12px;">
                    üîÑ Reintentar Quiz
                </button>
            </div>

            <div id="quiz1Result" style="display: none; margin-top: 24px;"></div>
        </section>

        <!-- Section 4: Estructura del Informe -->
        <section class="section" id="section4">
            <div class="section-header">
                <div class="section-icon">üìã</div>
                <h2 class="section-title">Estructura del Informe</h2>
            </div>

            <div class="card">
                <p style="font-size: 18px; margin-bottom: 24px;">Todo informe debe seguir esta estructura l√≥gica:</p>
                <img src="https://images.unsplash.com/photo-1586281380349-632531db7ed4?w=600&h=400&fit=crop" alt="Estructura" class="section-image">
            </div>

            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-number">1</div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">Portada</h3>
                        <p>La "cara" del informe. Incluye: t√≠tulo, autor, materia, curso, fecha.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-number">2</div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">Introducci√≥n</h3>
                        <p>La "puerta de entrada". Responde: ¬øQu√© voy a investigar? ¬øPor qu√© es importante? ¬øC√≥mo lo har√©?</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-number">3</div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">Desarrollo</h3>
                        <p>El coraz√≥n del informe. Aqu√≠ presentas toda la investigaci√≥n, datos, an√°lisis y hallazgos.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-number">4</div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">Conclusi√≥n</h3>
                        <p>El cierre. Respondes a la pregunta principal y destacas los hallazgos m√°s importantes.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-number">5</div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">Bibliograf√≠a</h3>
                        <p>Lista de fuentes consultadas (libros, p√°ginas web, entrevistas, etc.).</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Concept Map Activity -->
        <section class="section" id="conceptMap">
            <div class="section-header">
                <div class="section-icon">üß©</div>
                <h2 class="section-title">Actividad 2: Mapa Conceptual</h2>
            </div>

            <div class="card">
                <p style="font-size: 18px; margin-bottom: 24px;">Arrastra los conceptos a su lugar correcto en el mapa. ¬°Puedes mover las piezas! Si no ves los √∫ltimos espacios, despl√°zate hacia abajo.</p>
            </div>

            <div class="concept-pool" id="conceptPool" style="position: sticky; top: 100px; z-index: 10;">
                <!-- Los conceptos se cargar√°n aqu√≠ din√°micamente -->
            </div>

            <div style="background: var(--color-surface); padding: 24px; border-radius: 14px; box-shadow: var(--shadow-md); margin-bottom: 150px;">
                <div style="margin-bottom: 16px;">
                    <div class="drop-label">1. Primera parte del informe (la "cara"):</div>
                    <div class="drop-zone" data-correct="Portada"></div>
                </div>

                <div style="margin-bottom: 16px;">
                    <div class="drop-label">2. Presenta el tema y su importancia:</div>
                    <div class="drop-zone" data-correct="Introducci√≥n"></div>
                </div>

                <div style="margin-bottom: 16px;">
                    <div class="drop-label">3. Contenido principal con datos y an√°lisis:</div>
                    <div class="drop-zone" data-correct="Desarrollo"></div>
                </div>

                <div style="margin-bottom: 16px;">
                    <div class="drop-label">4. Responde a la pregunta principal:</div>
                    <div class="drop-zone" data-correct="Conclusi√≥n"></div>
                </div>

                <div style="margin-bottom: 16px;">
                    <div class="drop-label">5. Lista de fuentes consultadas:</div>
                    <div class="drop-zone" data-correct="Bibliograf√≠a"></div>
                </div>

                <div style="margin-bottom: 16px;">
                    <div class="drop-label">Caracter√≠stica principal del informe:</div>
                    <div class="drop-zone" data-correct="Objetividad"></div>
                </div>
            </div>

            <div style="margin-top: 24px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                <button class="btn" onclick="checkConceptMap()" id="checkMapBtn">Verificar Respuestas</button>
                <button class="btn btn-secondary" onclick="resetConceptMap()">Reiniciar</button>
                <button class="btn" onclick="retryConceptMap()" id="retryMapBtn" style="display: none; background: var(--color-warning);">
                    üîÑ Reintentar Mapa
                </button>
            </div>

            <div id="conceptMapResult" style="display: none; margin-top: 24px;"></div>
        </section>

        <!-- Section 5: Informe vs. Otros G√©neros -->
        <section class="section" id="section5">
            <div class="section-header">
                <div class="section-icon">üìñ</div>
                <h2 class="section-title">Informe vs. Otros G√©neros</h2>
            </div>

            <div class="card">
                <p style="font-size: 18px; margin-bottom: 24px;">Veamos c√≥mo el MISMO evento se escribe diferente seg√∫n el g√©nero:</p>
                <img src="https://images.unsplash.com/photo-1519682337058-a94d519337bc?w=600&h=350&fit=crop" alt="G√©neros" class="section-image">
            </div>

            <div style="text-align: center; padding: 32px; background: var(--color-bg-blue); border-radius: 20px; margin-bottom: 32px;">
                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 12px;">Tema: "La Lluvia en la Ciudad"</h3>
                <p style="color: var(--color-text-secondary);">El mismo evento, tres formas distintas de contarlo</p>
            </div>

            <div class="grid">
                <div class="grid-card" style="border-top: 5px solid var(--color-primary);">
                    <div class="grid-card-emoji">üìã</div>
                    <h3 class="grid-card-title" style="color: var(--color-primary);">INFORME</h3>
                    <p style="font-size: 14px; color: var(--color-text-secondary); margin-bottom: 16px;"><em>Objetivo, factual, verificable</em></p>
                    <div style="background: var(--color-bg-blue); padding: 16px; border-radius: 10px; border-left: 4px solid var(--color-primary); margin-bottom: 16px;">
                        <p style="font-size: 14px; line-height: 1.7;">Seg√∫n el reporte meteorol√≥gico del 10 de noviembre, la ciudad experiment√≥ una precipitaci√≥n de 45mm durante 3 horas (8:00-11:00 AM). Se registr√≥ 85% de humedad y 16¬∞C. El tr√°fico aument√≥ 30% durante las horas pico.</p>
                    </div>
                    <div style="font-size: 13px; color: var(--color-text-secondary);">
                        <p>‚úì Datos verificables</p>
                        <p>‚úì N√∫meros y porcentajes</p>
                        <p>‚úì Sin emociones</p>
                    </div>
                </div>

                <div class="grid-card" style="border-top: 5px solid #ef4444;">
                    <div class="grid-card-emoji">‚ú®</div>
                    <h3 class="grid-card-title" style="color: #ef4444;">POEMA</h3>
                    <p style="font-size: 14px; color: var(--color-text-secondary); margin-bottom: 16px;"><em>Emocional, figurado, r√≠tmico</em></p>
                    <div style="background: var(--color-bg-red); padding: 16px; border-radius: 10px; border-left: 4px solid #ef4444; margin-bottom: 16px;">
                        <p style="font-size: 14px; line-height: 1.7; font-style: italic;">La lluvia desciende como l√°grimas del cielo,<br>golpeando las ventanas con ritmo suave.<br>Las calles grises se convierten en r√≠os de plata...</p>
                    </div>
                    <div style="font-size: 13px; color: var(--color-text-secondary);">
                        <p>‚úì Lenguaje po√©tico</p>
                        <p>‚úì Met√°foras</p>
                        <p>‚úì Emociones intensas</p>
                    </div>
                </div>

                <div class="grid-card" style="border-top: 5px solid #14b8a6;">
                    <div class="grid-card-emoji">üìö</div>
                    <h3 class="grid-card-title" style="color: #14b8a6;">CUENTO</h3>
                    <p style="font-size: 14px; color: var(--color-text-secondary); margin-bottom: 16px;"><em>Narrativo, con personajes</em></p>
                    <div style="background: var(--color-bg-green); padding: 16px; border-radius: 10px; border-left: 4px solid #14b8a6; margin-bottom: 16px;">
                        <p style="font-size: 14px; line-height: 1.7;">Era un martes cuando Mar√≠a sali√≥ de la escuela. El cielo estaba gris. No hab√≠a tra√≠do paraguas. Pronto comenz√≥ a llover sin piedad...</p>
                    </div>
                    <div style="font-size: 13px; color: var(--color-text-secondary);">
                        <p>‚úì Personajes</p>
                        <p>‚úì Trama e historia</p>
                        <p>‚úì Sentimientos</p>
                    </div>
                </div>
            </div>

            <div class="key-concept" style="margin-top: 32px;">
                <div class="key-concept-title">La identidad del informe</div>
                <p>El informe es √∫nico: <strong>NO es poes√≠a</strong> (que busca emocionar), <strong>NO es cuento</strong> (que narra historias). El informe <strong>INFORMA</strong> con objetividad y datos. Presenta la realidad de manera clara y verificable.</p>
            </div>
        </section>

        <!-- Activity: Redacci√≥n Objetiva -->
        <section class="section" id="redaccionActivity">
            <div class="section-header">
                <div class="section-icon">‚úçÔ∏è</div>
                <h2 class="section-title">Actividad Final: Redacci√≥n Objetiva</h2>
            </div>

            <div class="card">
                <p style="font-size: 18px; margin-bottom: 24px;"><strong>Imagina esta situaci√≥n:</strong> Tu curso organiz√≥ una feria de ciencias. Escribe un p√°rrafo OBJETIVO describiendo el evento.</p>
                
                <div style="background: var(--color-bg-blue); padding: 20px; border-radius: 12px; margin: 24px 0; border-left: 5px solid var(--color-primary);">
                    <p style="font-weight: 700; margin-bottom: 12px; color: var(--color-primary);">üí° Recuerda usar palabras OBJETIVAS:</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 16px;">
                        <div style="background: white; padding: 12px; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 6px; color: var(--color-success);">‚úì Usa estas palabras:</p>
                            <p style="font-size: 14px; line-height: 1.6;">"se realiz√≥", "participaron", "se presentaron", "asistieron", "tuvo lugar", "se registraron"</p>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 6px; color: var(--color-error);">‚úó Evita estas palabras:</p>
                            <p style="font-size: 14px; line-height: 1.6;">"creo", "pienso", "me parece", "bonito", "incre√≠ble", "aburrido", "interesante"</p>
                        </div>
                    </div>
                </div>
                
                <div style="background: var(--color-bg-amber); padding: 20px; border-radius: 12px; margin: 24px 0; border-left: 5px solid var(--color-warning);">
                    <p style="font-weight: 600; margin-bottom: 12px;">üìã Datos del evento que debes incluir:</p>
                    <ul style="line-height: 2;">
                        <li>Fecha: 10 de noviembre de 2025</li>
                        <li>Lugar: Auditorio del colegio</li>
                        <li>Participantes: 85 estudiantes de 10mo a√±o</li>
                        <li>Proyectos presentados: 17 proyectos cient√≠ficos</li>
                        <li>Duraci√≥n: 3 horas (9:00 AM - 12:00 PM)</li>
                        <li>Asistentes: 120 personas (estudiantes, padres, profesores)</li>
                    </ul>
                </div>

                <textarea 
                    id="redaccionText" 
                    placeholder="Escribe tu p√°rrafo aqu√≠ usando lenguaje objetivo. Ejemplo: 'El 10 de noviembre de 2025 se realiz√≥ una feria de ciencias en el auditorio del colegio...'"
                    style="width: 100%; min-height: 200px; padding: 20px; border: 2px solid var(--color-gray-200); border-radius: 12px; font-size: 16px; font-family: inherit; line-height: 1.8; resize: vertical;"
                    oninput="checkRedaccionLength()"
                ></textarea>
                
                <div style="margin-top: 12px; color: var(--color-text-secondary); font-size: 14px;">
                    <span id="charCount">0</span> caracteres (m√≠nimo 150)
                </div>
            </div>

            <div style="text-align: center; margin-top: 24px;">
                <button class="btn" onclick="verifyRedaccion()" id="verifyRedaccionBtn">
                    üîç Verificar Mi Redacci√≥n
                </button>
                <button class="btn btn-secondary" onclick="retryRedaccion()" id="retryRedaccionBtn" style="display: none; margin-left: 12px;">
                    üîÑ Reintentar Redacci√≥n
                </button>
            </div>

            <div id="redaccionResult" style="display: none; margin-top: 24px;"></div>
        </section>

        <!-- Checklist Final -->
        <section class="section" id="checklist">
            <div class="section-header">
                <div class="section-icon">‚úÖ</div>
                <h2 class="section-title">Gu√≠a de Verificaci√≥n (No calificada)</h2>
            </div>

            <div class="card">
                <p style="font-size: 18px; margin-bottom: 24px;">Esta es una gu√≠a para que verifiques que tu informe cumpla con todos los requisitos. No suma puntos a tu nota.</p>
            </div>

            <div id="checklistContainer"></div>

            <div style="text-align: center; margin-top: 32px;">
                <button class="btn" onclick="showFinalResults()" style="background: var(--color-success);">
                    üéØ Ver Mis Resultados Finales
                </button>
            </div>
        </section>

        <!-- Final Results -->
        <section class="section" id="finalResults" style="display: none;">
            <div class="section-header">
                <div class="section-icon">üéØ</div>
                <h2 class="section-title">Tus Resultados</h2>
            </div>

            <div id="resultsContent"></div>

            <div style="text-align: center; margin-top: 32px;">
                <button class="btn" onclick="downloadResults()" style="margin-right: 12px;">
                    üì• Descargar Resultados
                </button>
                <button class="btn btn-secondary" onclick="resetClass()">
                    üîÑ Reiniciar Clase
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-emoji">üéâ</div>
            <h2 class="footer-title">¬°Felicitaciones!</h2>
            <p style="font-size: 18px; color: var(--color-text-secondary); max-width: 600px; margin: 0 auto; line-height: 1.7;">Has completado la gu√≠a del Informe Acad√©mico. Ahora tienes todas las herramientas para crear informes excelentes. Recuerda: <strong>investiga, organiza, s√© objetivo y revisa</strong>.</p>
            <div style="margin-top: 24px; padding: 16px 32px; background: linear-gradient(135deg, var(--color-primary), var(--color-success)); color: white; border-radius: 20px; display: inline-block; font-weight: 700;">
                ‚úì ¬°√âxito en tus informes!
            </div>
        </footer>
    </div>

    <script>
        // Google Sheets Configuration
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzw9fesxiygzUNbUXp62Y_q781LBQvZnqDOqHFJz3F3bigtjgCESZ6mS4_yv3s6xFNd/exec';
        // Instrucciones en console al cargar
        
        // Student Data & Scoring System
        let studentData = {
            name: '',
            course: '',
            startTime: null,
            scores: {
                quiz1: { total: 3, correct: 0, attempted: 0, weight: 2.5 },
                tiposQuiz: { total: 4, correct: 0, attempted: 0, weight: 2.5 },
                conceptMap: { total: 6, correct: 0, attempted: 0, weight: 2.5 },
                redaccion: { total: 5, correct: 0, attempted: 0, weight: 2.5 }
            }
        };

        // Start Class
        function startClass(event) {
            event.preventDefault();
            
            const name = document.getElementById('studentName').value.trim();
            const course = document.getElementById('studentCourse').value;
            
            if (!name || !course) {
                alert('Por favor completa todos los campos');
                return false;
            }
            
            studentData.name = name;
            studentData.course = course;
            studentData.startTime = new Date();
            
            // Hide login, show content
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('scoreBadge').style.display = 'flex';
            document.getElementById('displayName').textContent = name;
            document.getElementById('displayCourse').textContent = course;
            
            // Save to localStorage
            saveProgress();
            
            // Log Google Sheets setup instructions
            console.log('%cüìä CONFIGURACI√ìN GOOGLE SHEETS', 'color: #2563eb; font-size: 16px; font-weight: bold;');
            console.log('%cPara recibir los datos autom√°ticamente en Google Sheets:', 'color: #374151; font-size: 14px;');
            console.log('%c1. Abre Google Sheets y crea una nueva hoja', 'color: #6b7280;');
            console.log('%c2. Ve a Extensiones > Apps Script', 'color: #6b7280;');
            console.log('%c3. Copia el c√≥digo que est√° en el comentario al final de este archivo', 'color: #6b7280;');
            console.log('%c4. Despliega como Web App y copia la URL', 'color: #6b7280;');
            console.log('%c5. Pega la URL en la variable GOOGLE_SCRIPT_URL', 'color: #6b7280;');
            
            return false;
        }

        // Calculate total score
        function calculateScore() {
            let totalPoints = 0;
            let earnedPoints = 0;
            
            for (let activity in studentData.scores) {
                const activityData = studentData.scores[activity];
                const activityPoints = activityData.weight;
                const activityScore = (activityData.correct / activityData.total) * activityPoints;
                
                earnedPoints += activityScore;
                totalPoints += activityPoints;
            }
            
            const finalScore = (earnedPoints / totalPoints) * 10;
            return Math.round(finalScore * 10) / 10; // Redondear a 1 decimal
        }

        // Update score display
        function updateScore() {
            const score = calculateScore();
            document.getElementById('scoreValue').textContent = score.toFixed(1);
            saveProgress();
        }

        // Save progress to localStorage
        function saveProgress() {
            const key = `informe_${studentData.course}_${studentData.name}`;
            localStorage.setItem(key, JSON.stringify({
                ...studentData,
                lastUpdate: new Date(),
                finalScore: calculateScore()
            }));
        }

        // Send data to Google Sheets
        async function sendToGoogleSheets(finalData = null) {
            if (!GOOGLE_SCRIPT_URL || GOOGLE_SCRIPT_URL === 'TU_URL_DE_GOOGLE_APPS_SCRIPT_AQUI') {
                console.warn('Google Sheets no configurado. Agrega tu URL de Apps Script.');
                return;
            }

            const dataToSend = finalData || {
                timestamp: new Date().toISOString(),
                nombre: studentData.name,
                curso: studentData.course,
                quiz1_correctas: studentData.scores.quiz1.correct,
                quiz1_total: studentData.scores.quiz1.total,
                quiz1_puntos: (studentData.scores.quiz1.correct / studentData.scores.quiz1.total * studentData.scores.quiz1.weight).toFixed(2),
                tiposQuiz_correctas: studentData.scores.tiposQuiz.correct,
                tiposQuiz_total: studentData.scores.tiposQuiz.total,
                tiposQuiz_puntos: (studentData.scores.tiposQuiz.correct / studentData.scores.tiposQuiz.total * studentData.scores.tiposQuiz.weight).toFixed(2),
                conceptMap_correctas: studentData.scores.conceptMap.correct,
                conceptMap_total: studentData.scores.conceptMap.total,
                conceptMap_puntos: (studentData.scores.conceptMap.correct / studentData.scores.conceptMap.total * studentData.scores.conceptMap.weight).toFixed(2),
                redaccion_correctas: studentData.scores.redaccion.correct,
                redaccion_total: studentData.scores.redaccion.total,
                redaccion_puntos: (studentData.scores.redaccion.correct / studentData.scores.redaccion.total * studentData.scores.redaccion.weight).toFixed(2),
                nota_final: calculateScore().toFixed(2),
                fecha: new Date().toLocaleDateString('es-EC'),
                hora: new Date().toLocaleTimeString('es-EC')
            };

            try {
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dataToSend)
                });
                
                console.log('‚úÖ Datos enviados a Google Sheets');
            } catch (error) {
                console.error('‚ùå Error al enviar a Google Sheets:', error);
            }
        }

        // Show final results
        function showFinalResults() {
            const finalScore = calculateScore();
            const resultsSection = document.getElementById('finalResults');
            const resultsContent = document.getElementById('resultsContent');
            
            // Send to Google Sheets
            sendToGoogleSheets();
            
            let emoji, title, className, message;
            
            if (finalScore >= 9) {
                emoji = 'üèÜ';
                title = '¬°Excelente!';
                className = 'excelente';
                message = 'Dominas completamente el tema del informe acad√©mico.';
            } else if (finalScore >= 7) {
                emoji = 'üéâ';
                title = '¬°Muy Bien!';
                className = 'bueno';
                message = 'Tienes un buen entendimiento del informe acad√©mico.';
            } else if (finalScore >= 5) {
                emoji = 'üëç';
                title = 'Bien';
                className = 'regular';
                message = 'Comprendes los conceptos b√°sicos, pero puedes mejorar.';
            } else {
                emoji = 'üí™';
                title = 'Sigue Practicando';
                className = 'insuficiente';
                message = 'Te recomendamos revisar el material nuevamente.';
            }
            
            const quiz1Score = (studentData.scores.quiz1.correct / studentData.scores.quiz1.total * studentData.scores.quiz1.weight).toFixed(2);
            const tiposScore = (studentData.scores.tiposQuiz.correct / studentData.scores.tiposQuiz.total * studentData.scores.tiposQuiz.weight).toFixed(2);
            const mapScore = (studentData.scores.conceptMap.correct / studentData.scores.conceptMap.total * studentData.scores.conceptMap.weight).toFixed(2);
            const redaccionScore = (studentData.scores.redaccion.correct / studentData.scores.redaccion.total * studentData.scores.redaccion.weight).toFixed(2);
            
            resultsContent.innerHTML = `
                <div class="results-panel ${className}">
                    <div class="results-emoji">${emoji}</div>
                    <div class="results-title">${title}</div>
                    <div class="results-score">${finalScore.toFixed(1)}/10</div>
                    <p style="font-size: 18px; color: #6b7280; margin-bottom: 32px;">${message}</p>
                    
                    <div class="results-breakdown">
                        <div class="breakdown-item">
                            <div class="breakdown-label">Quiz Objetividad</div>
                            <div class="breakdown-value">${quiz1Score}/2.5</div>
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                ${studentData.scores.quiz1.correct}/${studentData.scores.quiz1.total} correctas
                            </div>
                        </div>
                        
                        <div class="breakdown-item">
                            <div class="breakdown-label">Quiz Tipos</div>
                            <div class="breakdown-value">${tiposScore}/2.5</div>
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                ${studentData.scores.tiposQuiz.correct}/${studentData.scores.tiposQuiz.total} correctas
                            </div>
                        </div>
                        
                        <div class="breakdown-item">
                            <div class="breakdown-label">Mapa Conceptual</div>
                            <div class="breakdown-value">${mapScore}/2.5</div>
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                ${studentData.scores.conceptMap.correct}/${studentData.scores.conceptMap.total} correctas
                            </div>
                        </div>
                        
                        <div class="breakdown-item">
                            <div class="breakdown-label">Actividad Redacci√≥n</div>
                            <div class="breakdown-value">${redaccionScore}/2.5</div>
                            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
                                ${studentData.scores.redaccion.correct}/${studentData.scores.redaccion.total} criterios cumplidos
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 32px; padding: 20px; background: white; border-radius: 12px; text-align: left;">
                        <p style="margin-bottom: 8px;"><strong>Estudiante:</strong> ${studentData.name}</p>
                        <p style="margin-bottom: 8px;"><strong>Curso:</strong> ${studentData.course}</p>
                        <p style="margin-bottom: 8px;"><strong>Fecha:</strong> ${new Date().toLocaleDateString('es-EC')}</p>
                        <p><strong>Hora:</strong> ${new Date().toLocaleTimeString('es-EC')}</p>
                    </div>
                </div>
            `;
            
            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // Download results
        function downloadResults() {
            const finalScore = calculateScore();
            const text = `
REPORTE DE CALIFICACI√ìN - EL INFORME ACAD√âMICO
=============================================

Estudiante: ${studentData.name}
Curso: ${studentData.course}
Fecha: ${new Date().toLocaleDateString('es-EC')}
Hora: ${new Date().toLocaleTimeString('es-EC')}

CALIFICACI√ìN FINAL: ${finalScore.toFixed(1)}/10

DESGLOSE POR ACTIVIDAD:
-----------------------
Quiz Objetividad: ${studentData.scores.quiz1.correct}/${studentData.scores.quiz1.total} (${(studentData.scores.quiz1.correct / studentData.scores.quiz1.total * studentData.scores.quiz1.weight).toFixed(2)}/2.5 pts)
Quiz Tipos de Informe: ${studentData.scores.tiposQuiz.correct}/${studentData.scores.tiposQuiz.total} (${(studentData.scores.tiposQuiz.correct / studentData.scores.tiposQuiz.total * studentData.scores.tiposQuiz.weight).toFixed(2)}/2.5 pts)
Mapa Conceptual: ${studentData.scores.conceptMap.correct}/${studentData.scores.conceptMap.total} (${(studentData.scores.conceptMap.correct / studentData.scores.conceptMap.total * studentData.scores.conceptMap.weight).toFixed(2)}/2.5 pts)
Actividad Redacci√≥n: ${studentData.scores.redaccion.correct}/${studentData.scores.redaccion.total} (${(studentData.scores.redaccion.correct / studentData.scores.redaccion.total * studentData.scores.redaccion.weight).toFixed(2)}/2.5 pts)

=============================================
`;
            
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Informe_${studentData.name}_${studentData.course}.txt`;
            a.click();
        }

        // Reset class
        function resetClass() {
            if (confirm('¬øEst√°s seguro de que quieres reiniciar? Perder√°s todo tu progreso actual.')) {
                localStorage.removeItem(`informe_${studentData.course}_${studentData.name}`);
                location.reload();
            }
        }

        // Progress Bar
        window.addEventListener('scroll', () => {
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight - windowHeight;
            const scrolled = window.pageYOffset;
            const progress = (scrolled / documentHeight) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        });

        // Scroll animations
        function checkVisibility() {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                const inView = rect.top < window.innerHeight * 0.8;
                if (inView) section.classList.add('visible');
            });
        }

        window.addEventListener('scroll', checkVisibility);
        window.addEventListener('load', checkVisibility);

        // Smooth scroll
        function scrollTo(id) {
            const element = document.getElementById(id);
            const navHeight = 80;
            const targetPosition = element.offsetTop - navHeight;
            window.scrollTo({ top: targetPosition, behavior: 'smooth' });
        }

        // Quiz 1 Data
        const quiz1Data = [
            {
                question: "¬øCu√°l de estas frases es OBJETIVA?",
                options: [
                    "La pel√≠cula fue aburrida y el final horrible",
                    "La pel√≠cula tiene una duraci√≥n de 120 minutos y fue estrenada en 2024",
                    "Creo que el protagonista actu√≥ muy bien"
                ],
                correct: 1
            },
            {
                question: "Identifica la frase OBJETIVA:",
                options: [
                    "El cambio clim√°tico es terrible",
                    "La temperatura global aument√≥ 1.1¬∞C en los √∫ltimos 100 a√±os",
                    "Deber√≠amos preocuparnos por el planeta"
                ],
                correct: 1
            },
            {
                question: "¬øCu√°l es OBJETIVA?",
                options: [
                    "Mi profesor es muy buena gente y sus clases molan",
                    "El profesor usa estrategias que mejoraron el rendimiento en 25%",
                    "Pienso que las clases son interesantes"
                ],
                correct: 1
            }
        ];

        // Initialize Quiz 1
        function initQuiz1() {
            const container = document.getElementById('quiz1Container');
            
            quiz1Data.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.innerHTML = `
                    <div class="quiz-question">${index + 1}. ${item.question}</div>
                    <div class="quiz-options" id="options${index}">
                        ${item.options.map((opt, i) => `
                            <div class="quiz-option" onclick="checkAnswer(${index}, ${i}, ${item.correct})">
                                ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div id="feedback${index}"></div>
                `;
                container.appendChild(card);
            });
        }

        // Activity: Tipos de Informe
        const tiposQuizData = [
            {
                situation: "Tu clase visit√≥ una reserva natural. El profesor te pide escribir un documento contando lo que viste, las especies observadas y las actividades realizadas durante el recorrido.",
                options: [
                    { type: "Informe Expositivo", emoji: "üìä" },
                    { type: "Informe Descriptivo Anal√≠tico", emoji: "üî¨" },
                    { type: "Informe Persuasivo", emoji: "üí°" }
                ],
                correct: 0,
                explanation: "Es un informe EXPOSITIVO porque solo presenta hechos sobre lo que sucedi√≥ durante la visita, sin analizar ni proponer soluciones."
            },
            {
                situation: "En el laboratorio, realizaste un experimento sobre la fotos√≠ntesis. Debes explicar el proceso observado, analizar los resultados obtenidos y explicar por qu√© las plantas se comportaron de esa manera.",
                options: [
                    { type: "Informe Expositivo", emoji: "üìä" },
                    { type: "Informe Descriptivo Anal√≠tico", emoji: "üî¨" },
                    { type: "Informe Persuasivo", emoji: "üí°" }
                ],
                correct: 1,
                explanation: "Es un informe DESCRIPTIVO ANAL√çTICO porque describe el experimento Y analiza por qu√© sucedieron los resultados observados."
            },
            {
                situation: "Notaste que la biblioteca de tu colegio tiene pocos libros actualizados. Te piden escribir un documento donde expliques el problema, presentes datos sobre el uso de la biblioteca y sugieras c√≥mo mejorarla.",
                options: [
                    { type: "Informe Expositivo", emoji: "üìä" },
                    { type: "Informe Descriptivo Anal√≠tico", emoji: "üî¨" },
                    { type: "Informe Persuasivo", emoji: "üí°" }
                ],
                correct: 2,
                explanation: "Es un informe PERSUASIVO porque analiza un problema y propone soluciones para convencer a las autoridades de realizar cambios."
            },
            {
                situation: "Investigaste sobre el sistema de reciclaje en tu ciudad. Debes describir c√≥mo funciona actualmente, analizar su eficacia comparando datos de a√±os anteriores y explicar las causas de su √©xito o fracaso.",
                options: [
                    { type: "Informe Expositivo", emoji: "üìä" },
                    { type: "Informe Descriptivo Anal√≠tico", emoji: "üî¨" },
                    { type: "Informe Persuasivo", emoji: "üí°" }
                ],
                correct: 1,
                explanation: "Es un informe DESCRIPTIVO ANAL√çTICO porque no solo describe el sistema, sino que analiza datos, compara y explica causas."
            }
        ];

        function initTiposQuiz() {
            const container = document.getElementById('tiposQuizContainer');
            
            tiposQuizData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.style.marginBottom = '24px';
                card.innerHTML = `
                    <div class="quiz-question">
                        <div style="background: var(--color-bg-indigo); padding: 16px; border-radius: 10px; margin-bottom: 16px;">
                            <strong>Situaci√≥n ${index + 1}:</strong><br>
                            ${item.situation}
                        </div>
                        <p style="font-weight: 600; margin-top: 16px;">¬øQu√© tipo de informe ser√≠a m√°s apropiado?</p>
                    </div>
                    <div class="quiz-options" id="tiposOptions${index}">
                        ${item.options.map((opt, i) => `
                            <div class="quiz-option" onclick="checkTiposAnswer(${index}, ${i}, ${item.correct})" style="display: flex; align-items: center; gap: 12px;">
                                <span style="font-size: 32px;">${opt.emoji}</span>
                                <span style="font-weight: 600;">${opt.type}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div id="tiposFeedback${index}"></div>
                `;
                container.appendChild(card);
            });
        }

        let tiposQuizAnswers = {};

        function checkTiposAnswer(qIndex, selected, correct) {
            const optionsContainer = document.getElementById(`tiposOptions${qIndex}`);
            const options = optionsContainer.querySelectorAll('.quiz-option');
            const feedbackDiv = document.getElementById(`tiposFeedback${qIndex}`);
            const card = options[0].closest('.quiz-card');
            
            // Check if already answered
            if (tiposQuizAnswers[qIndex] !== undefined) return;
            
            tiposQuizAnswers[qIndex] = { selected, correct, isCorrect: selected === correct };
            
            options.forEach((opt, i) => {
                opt.classList.add('disabled');
            });
            
            feedbackDiv.className = 'quiz-feedback';
            feedbackDiv.style.background = 'var(--color-bg-blue)';
            feedbackDiv.style.color = 'var(--color-text)';
            feedbackDiv.innerHTML = '‚úÖ Respuesta registrada. Haz clic en "Verificar Respuestas" para ver los resultados.';
        }

        function verifyTiposQuiz() {
            let correct = 0;
            let total = tiposQuizData.length;
            
            tiposQuizData.forEach((item, index) => {
                const answer = tiposQuizAnswers[index];
                if (!answer) return;
                
                const optionsContainer = document.getElementById(`tiposOptions${index}`);
                const options = optionsContainer.querySelectorAll('.quiz-option');
                const feedbackDiv = document.getElementById(`tiposFeedback${index}`);
                const card = options[0].closest('.quiz-card');
                
                options.forEach((opt, i) => {
                    if (i === item.correct) opt.classList.add('correct');
                    else if (i === answer.selected) opt.classList.add('incorrect');
                });
                
                const isCorrect = answer.isCorrect;
                card.classList.add(isCorrect ? 'correct' : 'incorrect');
                
                feedbackDiv.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
                feedbackDiv.innerHTML = isCorrect
                    ? `üéâ ¬°Excelente! ${item.explanation}`
                    : `‚ùå ${item.explanation}`;
                
                if (isCorrect) correct++;
            });
            
            studentData.scores.tiposQuiz.correct = correct;
            studentData.scores.tiposQuiz.attempted = Object.keys(tiposQuizAnswers).length;
            updateScore();
            
            const resultDiv = document.getElementById('tiposQuizResult');
            const percentage = Math.round((correct / total) * 100);
            const score = (correct / total * studentData.scores.tiposQuiz.weight).toFixed(2);
            
            resultDiv.className = 'result-box';
            resultDiv.innerHTML = `
                <div class="result-emoji">${percentage === 100 ? 'üèÜ' : percentage >= 70 ? 'üéâ' : 'üëç'}</div>
                <div class="result-title">Resultado: ${correct}/${total} correctas</div>
                <p style="font-size: 18px; color: var(--color-text-secondary); margin-top: 12px;">
                    Puntuaci√≥n: ${score}/2.5 puntos (${percentage}%)
                </p>
            `;
            resultDiv.style.display = 'block';
            
            document.getElementById('verifyTiposBtn').style.display = 'none';
            document.getElementById('retryTiposBtn').style.display = 'inline-block';
        }

        function retryTiposQuiz() {
            // Reset answers
            tiposQuizAnswers = {};
            
            // Clear and reinitialize quiz
            const container = document.getElementById('tiposQuizContainer');
            container.innerHTML = '';
            initTiposQuiz();
            
            // Hide result and retry button
            document.getElementById('tiposQuizResult').style.display = 'none';
            document.getElementById('retryTiposBtn').style.display = 'none';
            document.getElementById('verifyTiposBtn').style.display = 'inline-block';
            
            // Scroll to quiz
            document.getElementById('activityTipos').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        let quiz1Answers = {};

        function checkAnswer(qIndex, selected, correct) {
            const optionsContainer = document.getElementById(`options${qIndex}`);
            const options = optionsContainer.querySelectorAll('.quiz-option');
            const feedbackDiv = document.getElementById(`feedback${qIndex}`);
            const card = options[0].closest('.quiz-card');
            
            // Check if already answered
            if (quiz1Answers[qIndex] !== undefined) return;
            
            quiz1Answers[qIndex] = { selected, correct, isCorrect: selected === correct };
            
            options.forEach((opt, i) => {
                opt.classList.add('disabled');
            });
            
            feedbackDiv.className = 'quiz-feedback';
            feedbackDiv.style.background = 'var(--color-bg-blue)';
            feedbackDiv.style.color = 'var(--color-text)';
            feedbackDiv.innerHTML = '‚úÖ Respuesta registrada. Haz clic en "Verificar Respuestas" para ver los resultados.';
        }

        function verifyQuiz1() {
            let correct = 0;
            let total = quiz1Data.length;
            
            quiz1Data.forEach((item, index) => {
                const answer = quiz1Answers[index];
                if (!answer) return;
                
                const optionsContainer = document.getElementById(`options${index}`);
                const options = optionsContainer.querySelectorAll('.quiz-option');
                const feedbackDiv = document.getElementById(`feedback${index}`);
                const card = options[0].closest('.quiz-card');
                
                options.forEach((opt, i) => {
                    if (i === item.correct) opt.classList.add('correct');
                    else if (i === answer.selected) opt.classList.add('incorrect');
                });
                
                const isCorrect = answer.isCorrect;
                card.classList.add(isCorrect ? 'correct' : 'incorrect');
                
                feedbackDiv.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
                feedbackDiv.innerHTML = isCorrect
                    ? 'üéâ ¬°Excelente! Has identificado correctamente la frase objetiva.'
                    : '‚ùå No es correcto. La frase objetiva contiene datos verificables sin opiniones.';
                
                if (isCorrect) correct++;
            });
            
            studentData.scores.quiz1.correct = correct;
            studentData.scores.quiz1.attempted = Object.keys(quiz1Answers).length;
            updateScore();
            
            const resultDiv = document.getElementById('quiz1Result');
            const percentage = Math.round((correct / total) * 100);
            const score = (correct / total * studentData.scores.quiz1.weight).toFixed(2);
            
            resultDiv.className = 'result-box';
            resultDiv.innerHTML = `
                <div class="result-emoji">${percentage === 100 ? 'üèÜ' : percentage >= 70 ? 'üéâ' : 'üëç'}</div>
                <div class="result-title">Resultado: ${correct}/${total} correctas</div>
                <p style="font-size: 18px; color: var(--color-text-secondary); margin-top: 12px;">
                    Puntuaci√≥n: ${score}/2.5 puntos (${percentage}%)
                </p>
            `;
            resultDiv.style.display = 'block';
            
            document.getElementById('verifyQuiz1Btn').style.display = 'none';
            document.getElementById('retryQuiz1Btn').style.display = 'inline-block';
        }

        function retryQuiz1() {
            // Reset answers
            quiz1Answers = {};
            
            // Clear and reinitialize quiz
            const container = document.getElementById('quiz1Container');
            container.innerHTML = '';
            initQuiz1();
            
            // Hide result and retry button
            document.getElementById('quiz1Result').style.display = 'none';
            document.getElementById('retryQuiz1Btn').style.display = 'none';
            document.getElementById('verifyQuiz1Btn').style.display = 'inline-block';
            
            // Scroll to quiz
            document.getElementById('quiz1').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Concept Map
        const concepts = ['Portada', 'Introducci√≥n', 'Desarrollo', 'Conclusi√≥n', 'Bibliograf√≠a', 'Objetividad'];

        function initConceptMap() {
            const pool = document.getElementById('conceptPool');
            
            // Desordenar los conceptos usando algoritmo Fisher-Yates
            const shuffledConcepts = [...concepts];
            for (let i = shuffledConcepts.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledConcepts[i], shuffledConcepts[j]] = [shuffledConcepts[j], shuffledConcepts[i]];
            }
            
            shuffledConcepts.forEach(concept => {
                const div = document.createElement('div');
                div.className = 'draggable';
                div.draggable = true;
                div.textContent = concept;
                div.addEventListener('dragstart', handleDragStart);
                div.addEventListener('dragend', handleDragEnd);
                pool.appendChild(div);
            });

            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        let draggedElement = null;

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            if (!this.classList.contains('filled')) {
                this.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            if (!this.classList.contains('filled') && draggedElement) {
                this.appendChild(draggedElement);
                this.classList.add('filled');
                draggedElement.addEventListener('click', function() {
                    returnToPool(this);
                });
            }
        }

        function returnToPool(element) {
            const pool = document.getElementById('conceptPool');
            const zone = element.parentElement;
            zone.classList.remove('filled', 'correct', 'incorrect');
            pool.appendChild(element);
        }

        function checkConceptMap() {
            const zones = document.querySelectorAll('.drop-zone');
            let correct = 0;
            let total = zones.length;
            
            zones.forEach(zone => {
                const expected = zone.dataset.correct;
                const draggable = zone.querySelector('.draggable');
                
                if (draggable && draggable.textContent === expected) {
                    zone.classList.add('correct');
                    zone.classList.remove('incorrect');
                    correct++;
                } else if (draggable) {
                    zone.classList.add('incorrect');
                    zone.classList.remove('correct');
                }
            });
            
            const percentage = Math.round((correct / total) * 100);
            const resultDiv = document.getElementById('conceptMapResult');
            
            let emoji = percentage === 100 ? 'üéâ' : percentage >= 70 ? 'üëç' : 'üí™';
            let message = percentage === 100 
                ? '¬°Perfecto! Has completado el mapa correctamente.'
                : percentage >= 70
                ? `¬°Muy bien! ${correct} de ${total} correctas. Revisa las incorrectas.`
                : `Sigue intentando. ${correct} de ${total} correctas. ¬°T√∫ puedes!`;
            
            resultDiv.className = 'result-box';
            resultDiv.innerHTML = `
                <div class="result-emoji">${emoji}</div>
                <div class="result-title">${message}</div>
                <p style="color: var(--color-text-secondary); margin-top: 12px;">Porcentaje: ${percentage}%</p>
            `;
            resultDiv.style.display = 'block';
            
            // Update score (only count if not already counted)
            studentData.scores.conceptMap.correct = correct;
            updateScore();
            
            document.getElementById('checkMapBtn').style.display = 'none';
            document.getElementById('retryMapBtn').style.display = 'inline-block';
        }

        function retryConceptMap() {
            // Reset the map
            resetConceptMap();
            
            // Hide result and retry button
            document.getElementById('conceptMapResult').style.display = 'none';
            document.getElementById('retryMapBtn').style.display = 'none';
            document.getElementById('checkMapBtn').style.display = 'inline-block';
            
            // Scroll to top of activity
            document.getElementById('conceptMap').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function resetConceptMap() {
            const zones = document.querySelectorAll('.drop-zone');
            const pool = document.getElementById('conceptPool');
            
            zones.forEach(zone => {
                const draggable = zone.querySelector('.draggable');
                if (draggable) {
                    pool.appendChild(draggable);
                }
                zone.classList.remove('filled', 'correct', 'incorrect');
            });
            
            document.getElementById('conceptMapResult').style.display = 'none';
        }

        // Checklist
        const checklistItems = [
            { text: "¬øTiene portada con t√≠tulo, autor, curso y fecha?", category: "Formato" },
            { text: "¬øIncluye introducci√≥n que explica el tema?", category: "Estructura" },
            { text: "¬øEl desarrollo presenta informaci√≥n objetiva?", category: "Contenido" },
            { text: "¬øIncluye datos verificables (no opiniones)?", category: "Contenido" },
            { text: "¬øEst√° organizado en p√°rrafos l√≥gicos?", category: "Organizaci√≥n" },
            { text: "¬øTiene conclusiones que responden al tema?", category: "Estructura" },
            { text: "¬øIncluye bibliograf√≠a/fuentes?", category: "Fuentes" },
            { text: "¬øRevis√© ortograf√≠a y gram√°tica?", category: "Revisi√≥n" },
            { text: "¬øUs√© lenguaje formal y objetivo?", category: "Lenguaje" },
            { text: "¬øEl documento se ve profesional?", category: "Presentaci√≥n" }
        ];

        function initChecklist() {
            const container = document.getElementById('checklistContainer');
            
            checklistItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'checklist-item';
                div.innerHTML = `
                    <div class="checkbox"></div>
                    <div style="flex: 1;">${item.text}</div>
                    <div style="padding: 4px 12px; background: var(--color-bg-blue); border-radius: 8px; font-size: 12px; font-weight: 600;">
                        ${item.category}
                    </div>
                `;
                div.addEventListener('click', () => toggleChecklistItem(div));
                container.appendChild(div);
            });
        }

        function toggleChecklistItem(item) {
            item.classList.toggle('checked');
            // Checklist ya no actualiza el score ni activa resultados
        }

        function checkChecklistComplete() {
            // Esta funci√≥n ya no hace nada - checklist es solo gu√≠a
        }

        // Redaccion Activity
        function checkRedaccionLength() {
            const text = document.getElementById('redaccionText').value;
            document.getElementById('charCount').textContent = text.length;
        }

        function verifyRedaccion() {
            const text = document.getElementById('redaccionText').value.trim();
            const resultDiv = document.getElementById('redaccionResult');
            const btn = document.getElementById('verifyRedaccionBtn');
            
            if (text.length < 50) {
                alert('Por favor escribe al menos 50 caracteres antes de verificar.');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = '‚úì Verificado';
            
            // Criterios de evaluaci√≥n
            const criteria = {
                length: text.length >= 150,
                hasNumbers: /\d+/.test(text),
                hasDate: /\d+\s*(de\s*)?\w+\s*(de\s*)?\d{4}|noviembre|10/.test(text.toLowerCase()),
                noSubjective: !/creo|pienso|me parece|bonito|feo|aburrido|interesante|incre√≠ble/i.test(text),
                hasObjectiveWords: /observ|registr|present|realiz|particip|asist|datos|seg√∫n/i.test(text)
            };
            
            let score = 0;
            const feedback = [];
            
            if (criteria.length) {
                score++;
                feedback.push({ text: '‚úì Extensi√≥n adecuada (150+ caracteres)', correct: true });
            } else {
                feedback.push({ text: '‚úó Necesitas escribir m√°s (m√≠nimo 150 caracteres)', correct: false });
            }
            
            if (criteria.hasNumbers) {
                score++;
                feedback.push({ text: '‚úì Incluye datos num√©ricos', correct: true });
            } else {
                feedback.push({ text: '‚úó Falta incluir datos num√©ricos del evento', correct: false });
            }
            
            if (criteria.hasDate) {
                score++;
                feedback.push({ text: '‚úì Menciona la fecha del evento', correct: true });
            } else {
                feedback.push({ text: '‚úó No mencionaste la fecha', correct: false });
            }
            
            if (criteria.noSubjective) {
                score++;
                feedback.push({ text: '‚úì Evita lenguaje subjetivo', correct: true });
            } else {
                feedback.push({ text: '‚úó Usa palabras subjetivas (creo, me parece, etc.)', correct: false });
            }
            
            if (criteria.hasObjectiveWords) {
                score++;
                feedback.push({ text: '‚úì Usa lenguaje objetivo adecuado', correct: true });
            } else {
                feedback.push({ text: '‚úó Falta usar palabras objetivas (se observ√≥, se registr√≥, etc.)', correct: false });
            }
            
            // Update score
            studentData.scores.redaccion.correct = score;
            studentData.scores.redaccion.attempted = studentData.scores.redaccion.total;
            updateScore();
            
            // Display results
            const percentage = (score / 5) * 100;
            let className, emoji, title;
            
            if (percentage >= 80) {
                className = 'excelente';
                emoji = 'üèÜ';
                title = '¬°Excelente redacci√≥n objetiva!';
            } else if (percentage >= 60) {
                className = 'bueno';
                emoji = 'üëç';
                title = 'Buen intento';
            } else {
                className = 'regular';
                emoji = 'üí™';
                title = 'Sigue practicando';
            }
            
            resultDiv.innerHTML = `
                <div class="results-panel ${className}">
                    <div class="results-emoji">${emoji}</div>
                    <div class="results-title">${title}</div>
                    <div class="results-score">${score}/5 criterios</div>
                    
                    <div style="text-align: left; margin-top: 24px;">
                        <p style="font-weight: 600; margin-bottom: 16px; font-size: 18px;">Evaluaci√≥n de tu redacci√≥n:</p>
                        ${feedback.map(f => `
                            <div style="padding: 12px; margin-bottom: 8px; border-radius: 8px; background: ${f.correct ? 'var(--color-bg-green)' : 'var(--color-bg-red)'}; border-left: 4px solid ${f.correct ? 'var(--color-success)' : 'var(--color-error)'};">
                                ${f.text}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-top: 24px; padding: 20px; background: white; border-radius: 12px; text-align: left;">
                        <p style="font-weight: 600; margin-bottom: 12px;">üí° Consejos para mejorar:</p>
                        <ul style="line-height: 2; padding-left: 20px;">
                            <li>Incluye todos los datos num√©ricos proporcionados</li>
                            <li>Usa verbos objetivos: "se realiz√≥", "participaron", "se presentaron"</li>
                            <li>Evita adjetivos de opini√≥n como "bonito", "incre√≠ble"</li>
                            <li>Menciona fecha, hora, lugar, cantidad de participantes</li>
                            <li>Estructura: inicio con contexto, desarrollo con datos, cierre objetivo</li>
                        </ul>
                    </div>
                </div>
            `;
            
            resultDiv.style.display = 'block';
            document.getElementById('verifyRedaccionBtn').style.display = 'none';
            document.getElementById('retryRedaccionBtn').style.display = 'inline-block';
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function retryRedaccion() {
            // Clear the textarea
            document.getElementById('redaccionText').value = '';
            document.getElementById('charCount').textContent = '0';
            
            // Hide result and retry button, show verify button
            document.getElementById('redaccionResult').style.display = 'none';
            document.getElementById('retryRedaccionBtn').style.display = 'none';
            const verifyBtn = document.getElementById('verifyRedaccionBtn');
            verifyBtn.style.display = 'inline-block';
            verifyBtn.disabled = false;
            verifyBtn.textContent = 'üîç Verificar Mi Redacci√≥n';
            
            // Scroll to activity
            document.getElementById('redaccionActivity').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Initialize all
        document.addEventListener('DOMContentLoaded', () => {
            initQuiz1();
            initTiposQuiz();
            initConceptMap();
            initChecklist();
            checkVisibility();
        });
    </script>

    <!--
    ============================================================
    C√ìDIGO PARA GOOGLE APPS SCRIPT
    ============================================================
    
    INSTRUCCIONES PARA CONFIGURAR:
    
    1. Abre Google Sheets: https://sheets.google.com
    2. Crea una nueva hoja llamada "Calificaciones El Informe"
    3. Ve a: Extensiones > Apps Script
    4. Borra todo el c√≥digo que aparece
    5. Copia y pega el siguiente c√≥digo:
    
    ============================================================
    
    function doPost(e) {
      try {
        const sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
        
        // Si la hoja est√° vac√≠a, agregar encabezados
        if (sheet.getLastRow() === 0) {
          sheet.appendRow([
            'Timestamp',
            'Nombre',
            'Curso',
            'Quiz1 Correctas',
            'Quiz1 Total',
            'Quiz1 Puntos',
            'QuizTipos Correctas',
            'QuizTipos Total',
            'QuizTipos Puntos',
            'MapaConceptual Correctas',
            'MapaConceptual Total',
            'MapaConceptual Puntos',
            'Checklist Completadas',
            'Checklist Total',
            'Checklist Puntos',
            'Nota Final',
            'Fecha',
            'Hora'
          ]);
          
          // Formatear encabezados
          const headerRange = sheet.getRange(1, 1, 1, 18);
          headerRange.setBackground('#2563eb');
          headerRange.setFontColor('#ffffff');
          headerRange.setFontWeight('bold');
        }
        
        // Parsear los datos recibidos
        const data = JSON.parse(e.postData.contents);
        
        // Agregar fila con datos
        sheet.appendRow([
          data.timestamp,
          data.nombre,
          data.curso,
          data.quiz1_correctas,
          data.quiz1_total,
          data.quiz1_puntos,
          data.tiposQuiz_correctas,
          data.tiposQuiz_total,
          data.tiposQuiz_puntos,
          data.conceptMap_correctas,
          data.conceptMap_total,
          data.conceptMap_puntos,
          data.checklist_completadas,
          data.checklist_total,
          data.checklist_puntos,
          data.nota_final,
          data.fecha,
          data.hora
        ]);
        
        return ContentService.createTextOutput(JSON.stringify({
          status: 'success',
          message: 'Datos guardados correctamente'
        })).setMimeType(ContentService.MimeType.JSON);
        
      } catch (error) {
        return ContentService.createTextOutput(JSON.stringify({
          status: 'error',
          message: error.toString()
        })).setMimeType(ContentService.MimeType.JSON);
      }
    }

    function doGet() {
      return ContentService.createTextOutput('El servicio est√° funcionando correctamente');
    }
    
    ============================================================
    
    6. Guarda el proyecto (Ctrl+S) con el nombre "Receptor Informe"
    7. Haz clic en "Implementar" > "Nueva implementaci√≥n"
    8. Selecciona tipo: "Aplicaci√≥n web"
    9. Descripci√≥n: "Receptor de calificaciones"
    10. Ejecutar como: "Yo"
    11. Qui√©n tiene acceso: "Cualquier usuario"
    12. Haz clic en "Implementar"
    13. Copia la URL de la aplicaci√≥n web
    14. Pega la URL en la variable GOOGLE_SCRIPT_URL al inicio del c√≥digo JavaScript
    15. ¬°Listo! Los datos se guardar√°n autom√°ticamente en tu hoja de c√°lculo
    
    NOTA: Cada vez que un estudiante complete la clase y vea sus
    resultados finales, sus datos se enviar√°n autom√°ticamente a tu
    Google Sheet con todos los detalles de su desempe√±o.
    
    ============================================================
    -->
</body>
</html>
